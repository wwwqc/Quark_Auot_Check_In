# 工作流名称（在 Actions 页面显示）
name: Quark Sign-in

# 触发条件：定时触发 + 手动触发
on:
  schedule:
    # 修正：cron 表达式与注释一致（UTC 1:00 = 北京时间 9:00），清理冗余空行
    - cron: '0 3 * * *'
  workflow_dispatch:  # 手动触发（保留，方便测试）

jobs:
  sign-in:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout code
        # 升级到稳定新版 v4，提升兼容性和安全性
        uses: actions/checkout@v4

      - name: Set up Python
        # 升级到稳定新版 v5，支持更多 Python 版本特性
        uses: actions/setup-python@v5
        with:
          # 指定具体 Python 版本（3.10 稳定兼容，避免 3.x 宽松版本的不稳定性）
          python-version: '3.10'

      - name: Install dependencies
        run: pip install requests

      - name: Run Quark Sign-in
        env:
          # 优化1：通过 GitHub Secrets 引用 Cookie，避免明文泄露
          # 需提前在仓库 Settings -> Secrets and variables -> Actions 中配置 COOKIE_QUARK
          COOKIE_QUARK: ${{ secrets.COOKIE_QUARK }}
        run: |
          python checkIn_Quark.py
